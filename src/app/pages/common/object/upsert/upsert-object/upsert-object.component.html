<div class="card">
    <div class="card-header">
        <h2>{{ isView ? 'View data object' : isEdit ? 'Edit data object details' : 'Add new data object'}}</h2>
        <div style="float: right; margin-top: -40px;" *ngIf="isView">
            <a [routerLink]="['/data-transfers', id, 'edit']" class="btn btn-primary mr-5" target="_blank">
                <i class="fa fa-edit"></i> Edit
            </a>
            <button class="btn btn-primary mr-1">
                <i class="fa fa-print"></i> Print
            </button>
            <button class="btn btn-primary">
                <i class="fa fa-code"></i> JSON
            </button>
        </div>
    </div>

    <div class="card-body">
        <form [formGroup]="objectForm" >
            <div class="row">
                <div class="col-md-4 text-center">
                    <h6 class="pt-4">Display title</h6>
                </div>
                <div class="col-md-8">
                    <input type="text" class="form-control" placeholder="Enter display title..."
                        formControlName="displayTitle" *ngIf="!isView"/>
                    <span *ngIf="isView">{{objectData.displayTitle}}</span>
                </div>
            </div>

            <hr />

            <div class="row">
                <div class="col-md-4 text-center">
                    <h6 class="pt-4">DOI</h6>
                </div>
                <div class="col-md-8">
                    <input type="text" class="form-control" placeholder="Enter DOI..." formControlName="doi" *ngIf="!isView"/>
                    <span *ngIf="isView">{{objectData.doi}}</span>
                </div>
            </div>

            <hr />

            <div class="row">
                <div class="col-md-4 text-center">
                    <h6 class="pt-4">Version</h6>
                </div>
                <div class="col-md-8">
                    <input type="text" class="form-control" placeholder="Enter version..." formControlName="version" *ngIf="!isView"/>
                    <span *ngIf="isView">{{objectData.version}}</span>
                </div>
            </div>

            <hr />

            <div class="row">
                <div class="col-md-4 text-center">
                    <h6 class="pt-4">Object class</h6>
                </div>
                <div class="col-md-8">
                    <select class="form-control" formControlName="objectClassId" *ngIf="!isView">
                        <option selected disabled value="">Select an option...</option>
                        <option [value]=class.id *ngFor="let class of objectClass">{{class.name}}</option>
                    </select>
                    <span *ngIf="isView">{{findObjectClass(objectData.objectClassId)}}</span>
                </div>
            </div>

            <hr />

            <div class="row">
                <div class="col-md-4 text-center">
                    <h6 class="pt-4">Object type</h6>
                </div>
                <div class="col-md-8">
                    <select class="form-control" formControlName="objectTypeId" *ngIf="!isView">
                        <option selected disabled value="">Select an option...</option>
                        <option [value]=type.id *ngFor="let type of objectType">{{type.name}}</option>
                    </select>
                    <span *ngIf="isView">{{findobjectType(objectData.objectTypeId)}}</span>
                </div>
            </div>

            <hr />

            <div class="row">
                <div class="col-md-4 text-center">
                    <h6 class="pt-4">Publication year</h6>
                </div>
                <div class="col-md-8">
                    <input type="text" class="form-control" placeholder="Enter publication year..."
                        formControlName="publicationYear" *ngIf="!isView" />
                    <span *ngIf="isView">{{objectData.publicationYear}}</span>
                </div>
            </div>

            <hr />

            <div class="row">
                <div class="col-md-4 text-center">
                    <h6 class="pt-4">Language</h6>
                </div>
                <div class="col-md-8">
                    <select class="form-control" formControlName="langCode" *ngIf="!isView">
                        <option selected disabled value="">Select an option...</option>
                        <option [value]="language.code" *ngFor="let language of languageCode">{{language.code}}</option>
                    </select>
                    <span *ngIf="isView">{{objectData.langCode}}</span>
                </div>
            </div>

            <hr />

            <div class="row">
                <div class="col-md-4 text-center">
                    <h6 class="pt-4">Managing organisation</h6>
                </div>
                <div class="col-md-8">
                    <input type="text" class="form-control" placeholder="Enter managing organisation..."
                        formControlName="managingOrg" *ngIf="!isView" />
                    <span *ngIf="isView">{{objectData.managingOrg}}</span>
                </div>
            </div>

            <hr />

            <div class="row">
                <div class="col-md-4 text-center">
                    <h6 class="pt-4">Access type</h6>
                </div>
                <div class="col-8">
                    <select class="form-control" formControlName="accessTypeId" *ngIf="!isView">
                        <option selected disabled value="">Select an option...</option>
                        <option [value]=access.id *ngFor="let access of accessType">{{access.name}}</option>
                    </select>
                    <span *ngIf="isView">{{findAccessType(objectData.accessTypeId)}}</span>
                </div>
            </div>

            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Access details</h6>
                </div>
            </div>
            <br />
            <!-- <div formGroupName="accessDetails"> -->
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Description</strong>
                    </div>
                    <div class="col-md-8">
                        <textarea class="form-control" cols="30" rows="5" placeholder="Enter description..."
                            formControlName="accessDetails" *ngIf="!isView"></textarea>
                        <span *ngIf="isView">{{objectData.accessDetails}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>URL</strong>
                    </div>
                    <div class="col-md-8">
                        <input type="text" class="form-control" placeholder="Enter a parameter..."
                            formControlName="accessDetailsUrl" *ngIf="!isView" />
                        <span *ngIf="isView">{{objectData.accessDetailsUrl}}</span>
                    </div>
                </div>
            <!-- </div> -->


            <hr />

            <div class="row">
                <div class="col-md-4 text-center">
                    <h6 class="pt-4">EOSC category</h6>
                </div>
                <div class="col-8">
                    <select class="form-control" formControlName="eoscCategory" *ngIf="!isView">
                        <option selected disabled value="0">Select an option...</option>
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                    <span *ngIf="isView">{{objectData.eoscCategory}}</span>
                </div>
            </div>

            <hr />
            <div formGroupName="objectDatasets">
            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Dataset record keys</h6>
                </div>
            </div>
            <br />
            <!-- <div formGroupName="datasetRecordKeys"> -->
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Keys type</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="recordKeysTypeId" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option [value]=key.id *ngFor="let key of keyType">{{key.name}}</option>
                        </select>
                        <span *ngIf="isView">{{findKeyType(objectData.objectDatasets?.recordKeysTypeId)}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Keys details</strong>
                    </div>
                    <div class="col-md-8">
                        <textarea class="form-control" cols="30" rows="5" placeholder="Enter a parameter"
                            formControlName="recordKeysDetails" *ngIf="!isView"></textarea>
                        <span *ngIf="isView">{{objectData.objectDatasets?.recordKeysDetails}}</span>
                    </div>
                </div>
            <!-- </div> -->


            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Dataset deidentification level</h6>
                </div>
            </div>
            <br />
            <!-- <div formGroupName="datasetDeidentLevel"> -->
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Deidentification type</strong>
                    </div>
                    <div class="col-md-8">
                        <select class="form-control" formControlName="deidentTypeId" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option [value]=identification.id *ngFor="let identification of deidentificationType">{{identification.name}}</option>
                        </select>
                        <span *ngIf="isView">{{findDeidentificationType(objectData.objectDatasets?.deidentTypeId)}}</span>
                    </div>
                </div>
                <br />
                
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Deidentification direct</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="deidentDirect" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option value=false>No</option>
                            <option value=true>Yes</option>
                        </select>
                        <span *ngIf="isView">{{objectData.objectDatasets?.deidentDirect}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Deidentification HIPAA</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="deidentHipaa" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option value=false>No</option>
                            <option value=true>Yes</option>
                        </select>
                        <span *ngIf="isView">{{objectData.objectDatasets?.deidentHipaa}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Deidentification dates</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="deidentDates" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option value=false>No</option>
                            <option value=true>Yes</option>
                        </select>
                        <span *ngIf="isView">{{objectData.objectDatasets?.deidentDates}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Deidentification NOARR</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="deidentNonarr" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option value=false>No</option>
                            <option value=true>Yes</option>
                        </select>
                        <span *ngIf="isView">{{objectData.objectDatasets?.deidentNonarr}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Deidentification KANON</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="deidentKanon" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option value=false>No</option>
                            <option value=true>Yes</option>
                        </select>
                        <span *ngIf="isView">{{objectData.objectDatasets?.deidentKanon}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Deidentification details</strong>
                    </div>
                    <div class="col-md-8">
                        <textarea class="form-control" cols="30" rows="5" placeholder="Enter a parameter"
                            formControlName="deidentDetails" *ngIf="!isView"></textarea>
                        <span *ngIf="isView">{{objectData.objectDatasets?.deidentDetails}}</span>
                    </div>
                </div>
            <!-- </div> -->


            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Dataset consent</h6>
                </div>
            </div>
            <br />
            <!-- <div formGroupName="datasetConsent"> -->
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Consent type</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="consentTypeId" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option [value]=consent.id *ngFor="let consent of consentType">{{consent.name}}</option>
                        </select>
                        <span *ngIf="isView">{{findConsentType(objectData.objectDatasets?.consentTypeId)}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Consent noncommercial</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="consentNoncommercial" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option value=false>No</option>
                            <option value=true>Yes</option>
                        </select>
                        <span *ngIf="isView">{{objectData.objectDatasets?.consentNoncommercial}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Consent geographical restrict</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="consentGeogRestrict" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option value=false>No</option>
                            <option value=true>Yes</option>
                        </select>
                        <span *ngIf="isView">{{objectData.objectDatasets?.consentGeogRestrict}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Consent research type</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="consentResearchType" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option value=false>No</option>
                            <option value=true>Yes</option>
                        </select>
                        <span *ngIf="isView">{{objectData.objectDatasets?.consentResearchType}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Consent genetic only</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="consentGeneticOnly" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option value=false>No</option>
                            <option value=true>Yes</option>
                        </select>
                        <span *ngIf="isView">{{objectData.objectDatasets?.consentGeneticOnly}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Consent no methods</strong>
                    </div>
                    <div class="col-8">
                        <select class="form-control" formControlName="consentNoMethods" *ngIf="!isView">
                            <option selected disabled value="">Select an option...</option>
                            <option value=false>No</option>
                            <option value=true>Yes</option>
                        </select>
                        <span *ngIf="isView">{{objectData.objectDatasets?.consentNoMethods}}</span>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4 text-center">
                        <strong>Consent details</strong>
                    </div>
                    <div class="col-md-8">
                        <textarea class="form-control" cols="30" rows="5" placeholder="Enter a parameter"
                            formControlName="consentDetails" *ngIf="!isView"></textarea>
                        <span *ngIf="isView">{{objectData.objectDatasets?.consentDetails}}</span>
                    </div>
                </div>
            <!-- </div> -->
        </div>
            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Object instance(s)</h6>
                </div>
            </div>
            <br />
            <app-object-instance [sdOid]="id" [isView]="isView" [isEdit]="isEdit" [initiateEmit]="initiateEmit" (emitInstance)="getInstance($event)"></app-object-instance>

            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Object title(s)</h6>
                </div>
            </div>
            <br />
            <app-object-title [sdOid]="id" [isView]="isView" [isEdit]="isEdit" [initiateEmit]="initiateEmit" (emitTitle)="getTitle($event)"></app-object-title>
            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Object date(s)</h6>
                </div>
            </div>
            <br />
            <app-object-date [sdOid]="id" [isView]="isView" [isEdit]="isEdit" [initiateEmit]="initiateEmit" (emitDate)="getDate($event)"></app-object-date>
            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Object contributor(s)</h6>
                </div>
            </div>
            <br />
            <app-object-contributor [sdOid]="id" [isView]="isView" [isEdit]="isEdit" [initiateEmit]="initiateEmit" (emitContributor)="getContributor($event)"></app-object-contributor>
            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Object topic(s)</h6>
                </div>
            </div>
            <br />

            <app-object-topic [sdOid]="id" [isView]="isView" [isEdit]="isEdit" [initiateEmit]="initiateEmit" (emitTopic)="getTopic($event)"></app-object-topic>
            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Object identifier(s)</h6>
                </div>
            </div>
            <br />
            <app-object-identifier [sdOid]="id" [isView]="isView" [isEdit]="isEdit" [initiateEmit]="initiateEmit" (emitIdentifier)="getIdentifier($event)"></app-object-identifier>

            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Object descriptions(s)</h6>
                </div>
            </div>
            <br />
            <app-object-description [sdOid]="id" [isView]="isView" [isEdit]="isEdit" [initiateEmit]="initiateEmit" (emitDescription)="getDescription($event)"></app-object-description>
            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Object right(s)</h6>
                </div>
            </div>
            <br />
            <app-object-right [sdOid]="id" [isView]="isView" [isEdit]="isEdit" [initiateEmit]="initiateEmit" (emitRight)="getRight($event)"></app-object-right>
            <hr />

            <div class="row">
                <div class="col-md-12 text-center">
                    <h6 class="pt-3">Object relationship(s)</h6>
                </div>
            </div>
            <br />
            <app-object-relationship [sdOid]="id" [isView]="isView" [isEdit]="isEdit" [initiateEmit]="initiateEmit" (emitRelation)="getRelation($event)"></app-object-relationship>
            <hr />

            <div class="row">
                <div class="col-md-12 justify-content-center text-center">
                    <button class="btn btn-success mr-5" *ngIf="!isView" (click)="onClick()">{{isEdit ? 'Apply Changes' : 'Save'}}</button>
                    <button class="btn btn-danger" (click)="close()"> {{isView ? 'Back' : 'Cancel'}}</button>
                </div>
            </div>

        </form>
    </div>
</div>

<br />